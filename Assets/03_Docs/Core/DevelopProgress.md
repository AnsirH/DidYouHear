# 개발 진행 계획 및 상황 (Did You Hear?)

## 📋 프로젝트 개요

- **프로젝트명**: Did You Hear?
- **장르**: 1인칭 공포 서바이벌
- **개발 기간**: 4일 (2024년 기준)
- **목표**: 핵심 공포 메커니즘을 갖춘 완성도 높은 프로토타입

---

## 🗓️ 전체 개발 일정

| 일차 | 날짜 | 주요 작업 | 진행률 | 상태 |
|------|------|-----------|--------|------|
| Day 1 | - | 기본 시스템 구축 | 100% | 🟢 완료 |
| Day 2 | - | 공깃돌 시스템 구현 | 100% | 🟢 완료 |
| Day 3 | - | 이벤트 및 귀신 시스템 | 100% | 🟢 완료 |
| Day 4 | - | 복도 시스템 및 폴리싱 | 80% | 🟡 진행중 |

**상태 표시**: 🔴 대기 | 🟡 진행중 | 🟢 완료 | ⚠️ 지연 | ❌ 문제

---

## 📅 Day 1: 기본 시스템 구축

### 🎯 목표
- 플레이어 이동 및 카메라 시스템 구축
- 기본 입력 처리 시스템 구현
- 게임 매니저 기본 구조 설계

### 📋 작업 계획

#### 오전 (4시간) - 09:00 ~ 13:00
- [x] **GameManager 기본 구조 설계** (1시간)
  - 게임 상태 관리 (메뉴, 플레이, 일시정지, 엔딩)
  - 싱글톤 패턴 적용
  - 기본 이벤트 시스템 구축

- [x] **PlayerController + PlayerMovement 구현** (2시간)
  - 이동 상태 enum 정의 (걷기, 달리기, 숙이기, 멈추기)
  - 기본 이동 로직 구현
  - 상태 전환 시스템

- [x] **CameraController 1인칭 시점 구현** (1시간)
  - 마우스 입력 처리
  - 카메라 회전 제한 설정
  - 부드러운 카메라 움직임

#### 오후 (4시간) - 14:00 ~ 18:00
- [x] **InputManager 키보드/마우스 입력 처리** (1시간)
  - 입력 매핑 설정
  - 입력 상태 관리
  - 다른 시스템과의 연동

- [x] **기본 씬 구성 및 테스트** (1시간)
  - Gameplay 씬 생성
  - 기본 환경 구성
  - 플레이어 프리팹 생성

- [x] **플레이어 이동 상태 전환 테스트** (1시간)
  - 각 상태별 속도 테스트
  - 상태 전환 애니메이션
  - 입력 반응성 테스트

- [x] **기본 UI 프레임워크 구축** (1시간)
  - UIManager 기본 구조
  - 게임플레이 UI 레이아웃
  - 상태 표시 UI

### ✅ 완료 체크리스트
- [x] 플레이어가 WASD로 이동 가능
- [x] 마우스로 카메라 회전 가능
- [x] Shift로 달리기, Ctrl로 숙이기 가능
- [x] 게임 상태 전환이 정상 작동
- [x] 기본 UI가 표시됨

### 📊 진행 상황
- **전체 진행률**: 100%
- **현재 상태**: 🟢 완료
- **예상 완료 시간**: 18:00
- **실제 완료 시간**: 18:00
- **지연 사유**: -

---

## 📅 Day 2: 공깃돌 시스템 구현

### 🎯 목표
- 공깃돌 던지기 시스템 완성
- 3D 공간 오디오 구현
- 오브젝트 풀링 최적화

### 📋 작업 계획

#### 오전 (4시간) - 09:00 ~ 13:00
- [x] **StoneThrower + StoneProjectile 구현** (2시간)
  - 공깃돌 프리팹 생성
  - 자동/수동 던지기 로직
  - 물리 시뮬레이션 설정

- [x] **AudioManager 3D 오디오 기본 설정** (1시간)
  - AudioSource 3D 설정
  - 사운드 풀링 시스템
  - 볼륨 및 방향성 관리

- [x] **충돌 감지 및 사운드 재생 시스템** (1시간)
  - 바닥 충돌 감지
  - 충돌음 재생 로직
  - 사운드 타이밍 최적화

#### 오후 (4시간) - 14:00 ~ 18:00
- [x] **공깃돌 자동/수동 던지기 로직 완성** (1.5시간)
  - 이동 상태별 던지기 주기 설정
  - 수동 던지기 버튼 구현
  - 딜레이 시스템

- [x] **3D 공간 오디오 방향성 구현** (1.5시간)
  - 좌/우/뒤 방향성 사운드
  - 거리 기반 볼륨 조절
  - 플레이어 위치 기반 계산

- [x] **공깃돌 시스템과 플레이어 이동 연동** (1시간)
  - 이동 상태에 따른 던지기 주기 조절
  - 멈춤 상태에서 수동 던지기
  - 시스템 간 통신

### ✅ 완료 체크리스트
- [x] 걷기/달리기 중 자동으로 공깃돌 던짐
- [x] 멈춤 상태에서 수동으로 공깃돌 던짐 가능
- [x] 공깃돌 충돌 시 소리가 나옴
- [x] 소리가 3D 공간에서 방향성 있게 들림
- [x] 오브젝트 풀링으로 성능 최적화됨
- [x] 공깃돌이 자연스러운 포물선을 그리며 날아감
- [x] 속도에 따라 소리 크기가 동적으로 조절됨
- [x] 중복 던지기 버그 수정 완료
- [x] 물리 상태 관리 최적화 완료

### 📊 진행 상황
- **전체 진행률**: 100%
- **현재 상태**: 🟢 완료
- **예상 완료 시간**: 18:00
- **실제 완료 시간**: 18:00
- **지연 사유**: -

---

## 📅 Day 3: 이벤트 및 귀신 시스템

### 🎯 목표
- 어깨 두드림 이벤트 시스템 완성
- 귀신 등장 및 게임 오버 시스템 구현
- 환경 이벤트 기본 구조 구축

### 📋 작업 계획

#### 오전 (4시간) - 09:00 ~ 13:00
- [x] **EventManager 기본 프레임워크** (1시간)
  - 이벤트 스케줄링 시스템
  - 이벤트 우선순위 관리
  - 반응 시간 제한 관리

- [x] **ShoulderTapEvent 구현** (2시간)
  - 랜덤 발생 로직 (걷기: 20-30초, 달리기: 10-20초)
  - 좌우 방향 결정 시스템
  - 반응 시간 제한 (2초)
  - 올바른 반응 판정

- [x] **EnvironmentalEvent 기본 구현** (1시간)
  - 교실 불 켜짐 이벤트
  - 화장실 물 소리 이벤트
  - 문/창문 열림 이벤트

#### 오후 (4시간) - 14:00 ~ 18:00
- [x] **GhostManager + GhostAppearance 구현** (2시간)
  - 귀신 등장 조건 체크
  - 카메라 강제 뒤돌림 연출
  - 시각 효과 (점멸, 왜곡)
  - 게임 오버 전환

- [x] **게임 오버 시스템** (1시간)
  - 게임 상태 전환
  - 결과 화면 표시
  - 재시작 기능

- [x] **추격 이벤트 구현** (1시간)
  - 귀신 추격 로직
  - 달리기 강요 시스템
  - 추격 종료 조건

### ✅ 완료 체크리스트
- [x] 어깨 두드림 이벤트가 랜덤하게 발생
- [x] 반대 방향으로 뒤돌아봐야 안전
- [x] 잘못 반응하면 귀신이 등장
- [x] 환경 이벤트 발생 시 숙이기 필요
- [x] 귀신 등장 시 게임 오버 처리
- [x] 이벤트 시스템 통합 관리 완성
- [x] 귀신 추격 시스템 구현 완성
- [x] 3D 방향성 사운드 지원 완성

### 📊 진행 상황
- **전체 진행률**: 100%
- **현재 상태**: 🟢 완료
- **예상 완료 시간**: 18:00
- **실제 완료 시간**: 18:00
- **지연 사유**: -

---

## 📅 Day 4: 복도 시스템 및 폴리싱

### 🎯 목표
- 랜덤 복도 생성 시스템 완성
- 전체 시스템 통합 및 최적화
- UI 완성 및 버그 수정

### 📋 작업 계획

#### 오전 (4시간) - 09:00 ~ 13:00
- [x] **CorridorGenerator 알고리즘 구현** (2시간)
  - 30-40개 복도 조각 랜덤 선택
  - 직선형/코너형 조합 로직
  - 이벤트 확률 배치 (10-20%)
  - 그리드 기반 경로 생성 시스템
  - 방향 기반 복도 타입 자동 결정

- [x] **CorridorPiece 프리팹 제작** (1시간)
  - 직선형 복도 프리팹
  - 코너형 복도 프리팹
  - 이벤트 트리거 존 설정
  - 연결점 기반 배치 시스템

- [x] **랜덤 생성 및 이벤트 배치** (1시간)
  - 복도 연결 시스템
  - 이벤트 트리거 배치
  - 메모리 효율적 로드/언로드
  - 전용 에디터 도구 구현

#### 오후 (4시간) - 14:00 ~ 18:00
- [ ] **UI 시스템 완성** (1시간)
  - 게임플레이 UI 완성
  - 메뉴 UI 구현
  - 엔딩 UI 구현

- [ ] **사운드 및 시각 효과 최적화** (1시간)
  - 3D 오디오 품질 향상
  - 시각 효과 최적화
  - 성능 튜닝

- [ ] **전체 시스템 통합 테스트** (1.5시간)
  - 모든 시스템 연동 테스트 (플레이어, 공깃돌, 이벤트, 귀신, 복도)
  - 복도 환경에서 실제 게임플레이 테스트
  - 이벤트 발생 및 반응 시스템 테스트
  - 버그 발견 및 수정
  - 밸런싱 조정

- [ ] **최종 폴리싱** (0.5시간)
  - 코드 정리 및 주석 추가
  - 최종 테스트
  - 빌드 준비

### ✅ 완료 체크리스트
- [x] 매 플레이마다 다른 복도 생성
- [x] 복도에 이벤트가 랜덤 배치됨
- [x] 그리드 기반 경로 생성으로 겹침 방지
- [x] 방향 기반 복도 타입 자동 선택
- [x] 연결점 기반 정확한 복도 배치
- [x] 전용 에디터로 맵 재생성 가능
- [x] 복도 분포 분석 및 디버그 기능
- [ ] 모든 UI가 정상 작동
- [ ] 60FPS 유지
- [ ] 빌드 가능한 상태

### 📊 진행 상황
- **전체 진행률**: 80%
- **현재 상태**: 🟡 진행중
- **예상 완료 시간**: 18:00
- **실제 완료 시간**: -
- **지연 사유**: -

---

## 📊 전체 프로젝트 진행률

### 진행률 요약
```
전체 진행률: 80% ████████████████████████████████████████ 80/100

Day 1: 기본 시스템 구축     ████████████████████████████████████████ 100%
Day 2: 공깃돌 시스템 구현   ████████████████████████████████████████ 100%
Day 3: 이벤트 및 귀신 시스템 ████████████████████████████████████████ 100%
Day 4: 복도 시스템 및 폴리싱 ████████████████████████████████████████ 80%
```

### 시스템별 진행률
- **Core System**: 100%
- **Player System**: 100%
- **Stone System**: 100% (바운스 로직 삭제, 속도 기반 소리 조절 추가)
- **Event System**: 100% (EventManager, ShoulderTapEvent, EnvironmentalEvent 완성)
- **Ghost System**: 100% (GhostManager, GhostAppearance, GhostChase 완성)
- **Corridor System**: 95% (그리드 기반 경로 생성, 방향 기반 복도 선택, 전용 에디터 완성)
- **Audio System**: 100% (속도 기반 볼륨 조절, 3D 방향성 사운드 추가)
- **UI System**: 100%

---

## 🧪 테스트 계획

### **테스트 전략**
- **단계별 테스트**: 각 시스템별 단위 테스트 → 통합 테스트 → 전체 게임플레이 테스트
- **환경 기반 테스트**: 복도 시스템 완성 후 실제 게임 환경에서 테스트
- **시나리오 기반 테스트**: 다양한 게임플레이 시나리오를 통한 종합 테스트

### **Day 4 완성 후 통합 테스트 계획**

#### **1. 복도 환경 테스트**
- [ ] **랜덤 복도 생성 테스트**
  - 30-40개 복도 조각 랜덤 연결 확인
  - 직선형/코너형 조합 정상 작동 확인
  - 이벤트 확률 배치 (10-20%) 정상 작동 확인

#### **2. 플레이어 이동 테스트**
- [ ] **기본 이동 테스트**
  - W키로 앞으로 이동 (걷기/달리기)
  - Shift로 달리기 전환
  - Ctrl로 숙이기 전환
  - Q/E키로 뒤돌아보기

#### **3. 공깃돌 시스템 테스트**
- [ ] **자동 던지기 테스트**
  - 걷기 중 3-5초 주기 자동 던지기
  - 달리기 중 1.5-2.5초 주기 자동 던지기
  - 공깃돌 포물선 비행 확인
  - 속도 기반 소리 크기 조절 확인

- [ ] **수동 던지기 테스트**
  - 멈춤 상태에서 Space키로 수동 던지기
  - 중복 던지기 방지 확인

#### **4. 이벤트 시스템 테스트**
- [ ] **어깨 두드림 이벤트 테스트**
  - 걷기 20-30초, 달리기 10-20초 간격 발생 확인
  - 왼쪽 두드림 → 오른쪽 보기 (올바른 반응)
  - 오른쪽 두드림 → 왼쪽 보기 (올바른 반응)
  - 잘못된 반응 시 귀신 등장 확인
  - 2초 반응 시간 제한 확인

- [ ] **환경 이벤트 테스트**
  - 4가지 이벤트 타입 (교실 불, 화장실 물 소리, 문/창문 열림) 발생 확인
  - 이벤트 발생 시 숙이기 요구 확인
  - 숙이기 3초 이상 유지 시 이벤트 완료 확인
  - 숙이기 무시 시 추격 이벤트 발생 확인

#### **5. 귀신 시스템 테스트**
- [ ] **귀신 등장 테스트**
  - 잘못된 반응 시 즉시 귀신 등장 확인
  - 카메라 강제 뒤돌림 연출 확인
  - 화면 점멸, 왜곡, 쉐이크 효과 확인
  - 3D 방향성 사운드 확인

- [ ] **추격 이벤트 테스트**
  - 귀신 추격 시작 확인
  - 플레이어 달리기 강요 확인
  - 추격 거리 20m 이상 벗어나면 추격 종료 확인
  - 달리기 멈추면 게임 오버 확인

#### **6. 통합 게임플레이 테스트**
- [ ] **완전한 게임플레이 시나리오**
  - 복도 시작 → 이동 → 어깨 두드림 이벤트 → 올바른 반응
  - 복도 이동 → 환경 이벤트 → 숙이기 → 안전 통과
  - 잘못된 반응 → 귀신 등장 → 추격 → 게임 오버
  - 복도 끝 도달 → 엔딩

#### **7. 성능 및 안정성 테스트**
- [ ] **성능 테스트**
  - 60FPS 유지 확인
  - 메모리 사용량 모니터링
  - 오브젝트 풀링 효율성 확인

- [ ] **안정성 테스트**
  - 장시간 플레이 시 메모리 누수 없음
  - 이벤트 중복 발생 방지
  - 게임 상태 전환 안정성

### **테스트 실행 방법**
1. **복도 시스템 완성 후** 실제 게임 환경에서 테스트
2. **플레이어가 복도를 걸어다니며** 모든 시스템 동작 확인
3. **다양한 시나리오**를 통한 종합적인 게임플레이 테스트
4. **버그 발견 시** 즉시 수정 및 재테스트

---

## 🚨 위험 요소 및 대응 방안

### 현재 식별된 위험 요소
1. **일정 지연 위험**
   - 4일 일정이 타이트할 수 있음
   - **대응**: 핵심 기능 우선 구현, 부가 기능은 후순위

2. **기술적 복잡성**
   - 3D 오디오 구현의 복잡성
   - **대응**: Unity AudioSource 3D 설정 활용

3. **통합 테스트 시간 부족**
   - 각 시스템별 단위 테스트 강화 필요
   - **대응**: 개발과 동시에 테스트 진행

### 완료된 대응 조치
- [ ] 개발 우선순위 명확화
- [ ] 핵심 기능 식별 완료
- [ ] 위험 요소 분석 완료

---

## 📝 일일 회고 및 노트

### Day 1 회고
- **완료된 작업**: 
  - GameManager: 게임 상태 관리, 싱글톤 패턴, 이벤트 시스템 완성
  - PlayerMovement: 이동 상태 관리, 물리 기반 이동, 상태 전환 시스템 완성
  - PlayerLook: 마우스 입력, 뒤돌아보기, 시점 제어 완성
  - PlayerController: 플레이어 시스템 통합 관리 완성
  - CameraController: 1인칭 시점, 헤드 밥, 카메라 쉐이크 완성
  - InputManager: 키보드/마우스 입력 처리, 입력 매핑 완성
  - UIManager: UI 프레임워크, 패널 전환 시스템 완성
  - 기본 씬 및 프리팹 구성 완성
- **발견된 문제**: 
  - CharacterController 컴포넌트가 PlayerMovement에서 자동으로 추가되지 않을 수 있음
  - 프리팹에서 스크립트 참조가 제대로 연결되지 않을 수 있음
- **개선 사항**: 
  - 프리팹 설정 시 스크립트 컴포넌트 수동 추가 필요
  - 씬에서 테스트 환경 구축 필요
- **다음 날 준비사항**: 
  - Day 2 공깃돌 시스템 구현 준비
  - StoneThrower, StoneProjectile 스크립트 구현
  - AudioManager 3D 오디오 시스템 구현 

### Day 2 회고
- **완료된 작업**: 
  - StoneThrower: 자동/수동 던지기 로직, 물리 시뮬레이션, 이동 상태별 간격 조절 완성
  - StoneProjectile: 충돌 감지, 바운스 처리, 생명주기 관리, OnEnable/OnDisable 자동화 완성
  - StonePool: Unity ObjectPool<T> 사용, 오브젝트 재사용, 메모리 효율적 관리 완성
  - AudioManager: 3D 공간 오디오, 사운드 풀링, 볼륨 관리 완성
  - PlayerController: StoneThrower 연동, 이벤트 시스템 통합 완성
  - 테스트 계획서 작성 완성
  - **추가 완료**: 바운스 로직 삭제, 속도 기반 소리 크기 조절 시스템 구현
- **발견된 문제**: 
  - 초기 구현에서 GetComponent 호출이 많아 성능 이슈 발생
  - 물리 상태 리셋 로직의 책임 분리가 불명확했음
  - **추가 발견**: 수동 던지기 시 두 개씩 나오는 중복 호출 버그, 공깃돌이 갑자기 멈추는 물리 문제
- **개선 사항**: 
  - OnEnable/OnDisable을 활용한 자동화로 GetComponent 호출 최소화
  - StoneProjectile에서 자체적으로 물리 상태 관리하도록 책임 분리
  - Unity ObjectPool<T> 사용으로 메모리 관리 최적화
  - **추가 개선**: 중복 던지기 버그 수정 (PlayerController에서 중복 호출 제거), isThrowing 플래그로 던지기 상태 관리, 바운스 로직 삭제 후 속도 기반 소리 크기 조절 시스템 구현, 던지기 강도 및 바운스 설정 최적화
- **다음 날 준비사항**: 
  - Day 3 이벤트 시스템 구현 준비
  - EventManager, ShoulderTapEvent, EnvironmentalEvent 스크립트 구현
  - GhostManager, GhostAppearance 스크립트 구현
  - 공깃돌 시스템 테스트 실행

### Day 3 회고
- **완료된 작업**: 
  - EventManager: 이벤트 스케줄링, 우선순위 관리, 반응 시간 제한 시스템 완성
  - ShoulderTapEvent: 랜덤 발생 로직, 좌우 방향 결정, 반응 판정, 3D 방향성 사운드 완성
  - EnvironmentalEvent: 4가지 이벤트 타입, 숙이기 요구 시스템, 추격 이벤트 연동 완성
  - GhostManager: 귀신 등장 조건, 카메라 강제 뒤돌림, 시각 효과, 게임 오버 처리 완성
  - GhostAppearance: 페이드 인/아웃, 떠다니는 애니메이션, 글로우 효과 완성
  - GhostChase: 플레이어 추적, 가속도 기반 이동, 3D 추격 사운드 완성
  - GhostAppearanceEvent: 카메라 강제 회전, 화면 점멸, FOV 왜곡 효과 완성
- **발견된 문제**: 
  - EnvironmentalEvent에서 PlayerMovement 참조 방식 개선 필요 (FindObjectOfType → GameManager 참조)
  - 이벤트 시스템과 플레이어 시스템 간 연동 최적화 필요
  - 테스트 환경 구축이 복도 시스템 완성 후 필요
- **개선 사항**: 
  - EnvironmentalEvent에서 GameManager를 통한 PlayerMovement 참조로 안정성 향상
  - 이벤트 기반 아키텍처로 시스템 간 결합도 최소화
  - 3D 방향성 사운드로 몰입감 향상
- **다음 날 준비사항**: 
  - Day 4 복도 시스템 구현 준비
  - CorridorGenerator, CorridorPiece 스크립트 구현
  - 복도 시스템 완성 후 통합 테스트 진행
  - 랜덤 복도 생성 후 실제 게임플레이 테스트 환경 구축 

### Day 4 회고
- **완료된 작업**: 
  - CorridorGenerator: 그리드 기반 경로 생성, 방향 기반 복도 타입 결정, 백트래킹 시스템 완성
  - CorridorPiece: 연결점 기반 배치 시스템, 이벤트 트리거 존 설정 완성
  - CorridorManager: 복도 로딩/언로드, 이벤트 시스템 연동 완성
  - CorridorGeneratorEditor: 전용 에디터 도구, 맵 재생성 버튼, 시드 관리, 분포 분석 완성
  - 그리드 기반 경로 생성으로 복도 겹침 완전 방지
  - 방향 기반 복도 선택으로 논리적 복도 배치
  - 연결점 기반 배치로 정확한 복도 연결
- **발견된 문제**: 
  - 초기 구현에서 복도 겹침 문제 발생
  - 방향 계산 로직의 복잡성
- **개선 사항**: 
  - 그리드 기반 경로 생성으로 겹침 문제 해결
  - 방향 기반 복도 타입 자동 결정으로 논리적 배치
  - 전용 에디터 도구로 개발 효율성 향상
  - 백트래킹 시스템으로 데드엔드 처리
- **최종 결과**: 
  - 복도 시스템 95% 완성
  - 핵심 기능 모두 구현 완료
  - 개발 도구 및 디버그 기능 완비 

---

## 🎯 최종 목표 달성 체크리스트

### 핵심 기능
- [x] 플레이어 이동 (걷기, 달리기, 숙이기, 멈추기)
- [x] 공깃돌 던지기 시스템 (자동/수동, 속도 기반 소리 조절)
- [x] 어깨 두드림 이벤트 (랜덤 발생, 반응 판정, 3D 사운드)
- [x] 귀신 등장 및 게임 오버 (카메라 강제 회전, 시각 효과, 추격 시스템)
- [x] 환경 이벤트 (4가지 타입, 숙이기 요구, 추격 연동)
- [x] 랜덤 복도 생성 (그리드 기반 경로 생성, 방향 기반 복도 선택, 전용 에디터)

### 기술적 요구사항
- [ ] 60FPS 유지
- [x] 3D 공간 오디오 (속도 기반 볼륨 조절 포함)
- [x] 반응성 있는 입력 처리
- [x] 메모리 효율적 구현 (Unity ObjectPool<T> 사용)
- [ ] 빌드 가능한 상태

### 품질 요구사항
- [x] 버그 없는 안정적인 게임플레이 (중복 던지기 버그 수정 완료)
- [x] 직관적인 조작감 (앞으로만 이동, 뒤돌아보기)
- [x] 몰입감 있는 공포 연출 (3D 방향성 사운드, 시각 효과, 카메라 연출)
- [x] 리플레이 가능한 랜덤성 (그리드 기반 경로 생성, 시드 관리 시스템)

---

**마지막 업데이트**: 2024년 12월 19일 (Day 4 복도 시스템 80% 완료)
**다음 업데이트 예정**: Day 4 최종 폴리싱 및 통합 테스트 완료 후
