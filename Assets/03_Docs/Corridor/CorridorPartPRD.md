# 요구사항 명세서: 복도 조각

## 1. 개요

복도 조각은 게임에서 플레이어가 이동하게 될 **기본 공간 단위**이며, 각 조각은 고유한 구조와 기능을 가진다. 총 6가지 유형의 복도 조각이 존재하며, 이벤트를 발생시킬 수 있는 조각과 단순 이동용 조각으로 구분된다. 각 조각은 랜덤 생성 시스템에 의해 조합되어 매번 다른 복도 경로를 구성한다.

---

## 2. 목적

- 플레이어의 **이동 경로를 구성**하는 기본 단위를 제공한다.
- 각 조각의 고유한 특성을 통해 **다양한 게임플레이 경험**을 제공한다.
- 이벤트 발생 가능한 조각을 통해 **긴장감과 예측 불가능성**을 유지한다.
- 랜덤 생성 시스템과 연동하여 **리플레이성**을 확보한다.

---

## 3. 기능 요구사항 상세

### [REQ-CORRIDORPART-01] 복도 조각 유형

- **설명**: 복도 조각은 크게 직진형과 코너형으로 분류되며, 각각 세부 유형을 가진다.
- **세부 조건**:
    - **직진형 복도 조각**:
        - 교실 복도 조각: 양쪽에 교실이 있는 기본 복도, 이벤트 발생 가능
        - 교실&화장실 복도 조각: 교실과 화장실이 함께 있는 복도, 이벤트 발생 가능
        - 시작 복도 조각: 게임 시작 지점, 이벤트 발생 불가
        - 끝 복도 조각: 게임 종료 지점(탈출구), 이벤트 발생 불가
    - **코너형 복도 조각**: 코너에 도착하면 플레이어는 자동으로 회전되어야 한다.
        - 왼쪽 코너 복도 조각: 90도 좌회전, 이벤트 발생 불가
        - 오른쪽 코너 복도 조각: 90도 우회전, 이벤트 발생 불가

---

### [REQ-CORRIDORPART-02] 이벤트 발생 가능 조각

- **설명**: 특정 복도 조각에서만 환경 이벤트가 발생할 수 있다.
- **세부 조건**:
    - **이벤트 발생 가능 조각**: 교실 복도 조각, 교실&화장실 복도 조각
    - **이벤트 발생 불가 조각**: 시작/끝 복도 조각, 코너형 복도 조각
    - 이벤트 발생 확률: **10~20%** (CorridorRandomGenerationPRD.md 참조)
    - 가능한 이벤트 종류:
        - 교실 불이 켜짐 (교실 복도 조각에서만)
        - 화장실 물 소리 (교실&화장실 복도 조각에서만)
        - 문이 갑자기 열림 (모두 가능)
        - 창문을 세게 치는 소리 (모두 가능)

---

### [REQ-CORRIDORPART-03] 복도 조각 연결 시스템

- **설명**: 각 복도 조각은 다른 조각과 연결되어 연속적인 경로를 형성한다.
- **세부 조건**:
    - **직진형 조각**: 앞뒤로 다른 조각과 연결 가능
    - **코너형 조각**: 회전 후 새로운 방향으로 조각 연결
    - **시작 조각**: 뒤쪽 연결 불가, 앞쪽으로만 연결
    - **끝 조각**: 앞쪽 연결 불가, 뒤쪽으로만 연결
    - 연결 시 방향성과 위치가 정확히 일치해야 함

---

### [REQ-CORRIDORPART-04] 복도 조각 물리적 특성

- **설명**: 각 복도 조각은 일정한 크기와 물리적 속성을 가진다.
- **세부 조건**:
    - **표준 길이**: 8미터 (조각 유형별로 약간의 차이 허용)
    - **표준 폭**: 4미터

---

### [REQ-CORRIDORPART-05] 시각적 구분 요소

- **설명**: 각 복도 조각 유형은 시각적으로 구분 가능해야 한다.
- **세부 조건**:
    - **교실 복도 조각**: 왼쪽에 교실 문 2개가 보이는 구조
    - **교실&화장실 복도 조각**: 왼쪽은 교실 문 2개, 오른쪽은 화장실 문 2개가 함께 보이는 구조
    - **시작 복도 조각**: 왼쪽에 교실 문 2개가 보이고 뒤가 막혀있는 구조
    - **끝 복도 조각**: 왼쪽에 밝은 빛이 나오는 탈출구가 보이는 구조
    - **코너형 조각**: 회전 지점이 명확히 보이는 구조

---

## 4. 비기능 요구사항

- 각 복도 조각은 **메모리 효율적으로 로드/언로드**되어야 한다.
- 복도 조각 간 전환 시 **부드러운 카메라 이동**이 보장되어야 한다.
- 이벤트 발생 시 **시각적/청각적 피드백**이 즉시 제공되어야 한다.
- 복도 조각의 **물리적 충돌**이 정확히 처리되어야 한다.

---

## 5. 예외 처리

- 복도 조각 로드 실패 시 **기본 직진형 조각**으로 대체한다.
- 이벤트 발생 중 복도 조각이 언로드될 경우 **이벤트를 안전하게 종료**한다.
- 코너형 조각에서 회전 실패 시 **플레이어를 강제로 올바른 방향**으로 회전시킨다.
- 회전 과정에서 플레이어가 복도의 중앙에 있지 않는 경우, 위치를 중앙으로 조정한다.
- 시작/끝 조각이 중간에 배치될 경우 **자동으로 재배치**한다.
