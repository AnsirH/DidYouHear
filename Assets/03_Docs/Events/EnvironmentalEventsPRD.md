# 요구사항 명세서: 환경 이벤트

## 1. 개요

복도 구간에서 발생하는 **환경 이벤트**는 플레이어에게 심리적 긴장감을 제공하고, 숙이기를 요구하는 핵심 메커니즘이다. 환경 이벤트를 무시하거나 잘못 대응하면 귀신과 마주쳐 **추격 이벤트**가 발생한다.

---

## 2. 목적

- 단순한 이동 중에도 플레이어에게 **예측 불가능한 위협**을 제공.
- 이동 방식과 반응을 시험하여 **즉각적 판단력**을 요구.
- 다양한 **교실, 화장실, 창문, 문** 등을 활용해 현실적 공포 연출 강화.

---

## 3. 기능 요구사항 상세

### [REQ-EVENT-01] 이벤트 종류

- **설명**: 복도 구간에서 다양한 환경 이벤트가 랜덤으로 발생한다.
- **세부 조건**:
    - **교실 불 켜짐**: 특정 교실 불이 순간적으로 켜짐.
    - **화장실 물 소리**: 물방울 떨어지는 소리가 나다가 갑자기 물 틀리는 소리.
    - **문이 갑자기 열림**: 복도 중간의 문이 예고 없이 열림.
    - **창문 치는 소리**: 시각적 연출 없이 창문을 세게 여러 번 치는 소리.

---

### [REQ-EVENT-02] 올바른 대응

- **설명**: 이벤트 발생 시 플레이어는 반드시 **숙이기(Crouch)** 상태로 이동해야 한다.
- **세부 조건**:
    - 숙여서 이동하면 이벤트를 안전하게 통과.
    - 이벤트 중 숙이지 않고 이동하면 [REQ-EVENT-03]에 따라 귀신 추격이 발생.
    - 반응 시간 제한: **1~2초** 이내 숙이기 선택 필요.

---

### [REQ-EVENT-03] 잘못된 대응

- **설명**: 이벤트 대응 실패 시 귀신과 마주쳐 추격 이벤트가 시작된다.
- **세부 조건**:
    - 귀신 등장과 추격 시작.
    - 플레이어는 달리지 않으면 귀신에게 잡혀 즉시 게임 오버.
    - 플레이어는 일정 구간(복도 10~20m) 동안 달려야 추격을 회피 가능.
    - 추격 구간 종료 시 귀신은 사라지고 정상 이동 가능.

---

### [REQ-EVENT-04] 이벤트 시각/청각 연출

- **설명**: 이벤트는 시각적·청각적 효과를 통해 인지 가능해야 한다.
- **세부 조건**:
    - 불 켜짐: 깜빡임, 강도 변화.
    - 물 소리: 3D 방향 오디오로 플레이어 위치에 따라 다르게 들림.
    - 문/창문: 짧은 충격음과 함께 시야 내 시각적 연출 제공.

---

## 4. 비기능 요구사항

- 이벤트 발생과 연출은 **0.2초 이내**에 플레이어에게 인지 가능해야 한다.
- 이벤트 로직은 **랜덤 발생**과 동시에 복도 길이에 맞춰 자연스럽게 배치.
- 30분 플레이 기준 최소 10회 이상 이벤트 발생 보장.
- 이벤트 연출은 **최소 프레임 드랍 없이 60FPS 유지** 가능하도록 최적화.

---

## 5. 예외 처리

- 이벤트 발생 위치에 플레이어가 이미 고개를 돌린 상태라면, 이벤트는 감지 후 재연출 없이 정상 통과 처리.
- 이벤트 사운드 또는 시각 효과가 오류로 누락될 경우에도 로직 상 숙이기 체크는 정상 수행.
- 복도 끝이나 장애물 직전에서 이벤트가 발생할 경우, 자동으로 안전한 위치로 이벤트 재배치.