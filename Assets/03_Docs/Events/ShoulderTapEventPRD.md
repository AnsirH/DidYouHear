# 요구사항 명세서: 어깨 두드림 이벤트

## 1. 개요

플레이어가 복도를 이동하는 동안 랜덤한 타이밍에 보이지 않는 존재가 어깨를 두드린다. 이때 플레이어는 **두드려진 어깨의 반대 방향으로 뒤돌아봐야 하며**, 잘못 반응하거나 무시하면 귀신이 등장해 게임이 종료된다.

---

## 2. 목적

- 플레이어가 **청각·촉각적 환상**에 반응하도록 만들어 긴장감을 높인다.
- 즉각적인 반응을 요구하여 게임의 **몰입감**과 **위험 요소**를 강화한다.
- 단순한 이동 반복 속에 예측 불가능한 이벤트를 추가해 **리듬 변화를 제공**한다.

---

## 3. 기능 요구사항 상세

### [REQ-TAP-01] 랜덤 발생

- **설명**: 어깨 두드림 이벤트는 일정 확률로 발생한다.
- **세부 조건**:
    - 걷기 상태 → 평균 **20~30초 간격 랜덤**으로 발생.
    - 달리기 상태 → 평균 **10~20초 간격 랜덤**으로 발생.
    - 숙이기/멈추기 상태 → 발생하지 않는다.
    - 이벤트 발생은 플레이어 뒤에서 들려오는 **짧은 두드림 소리**와 화면 UI로 전달.
    - 만약 플레이어가 이벤트가 발생할 타이밍에 뒤를 돌아봤다면 즉시 게임 오버 처리.

---

### [REQ-TAP-02] 올바른 반응

- **설명**: 플레이어는 두드려진 어깨의 반대 방향으로 고개를 돌려야 한다.
- **세부 조건**:
    - 왼쪽 어깨 두드림 → 오른쪽으로 고개 돌리기.
    - 오른쪽 어깨 두드림 → 왼쪽으로 고개 돌리기.
    - 반응 시간 제한: **2초 이내**.
    - 올바르게 반응 시 귀신은 등장하지 않고, 짧은 안도감 효과(예: 호흡 소리)가 재생된다.

---

### [REQ-TAP-03] 잘못된 반응

- **설명**: 플레이어가 잘못 반응하거나 무시하면 귀신이 강제 등장한다.
- **세부 조건**:
    - 반대 방향이 아닌 같은 방향을 보거나, 2초 안에 반응하지 않으면 잘못된 반응으로 처리.
    - 즉시 카메라가 강제로 뒤돌려지고 귀신이 화면에 나타난다.
    - 귀신 등장 시 짧은 점멸 효과 + 강렬한 비명 사운드가 함께 재생된다.
    - 게임은 즉시 종료된다.

---

## 4. 비기능 요구사항

- 어깨 두드림 사운드는 반드시 **좌/우 방향성 오디오**로 구현되어야 한다.
- 어깨 두드림 UI는 두드린 방향( 오른쪽/왼쪽 )과 동일하게 표시되어야 한다.
- 이벤트 발생은 지나치게 잦지 않게 조율하여, **최소 10초 이상의 간격**을 보장해야 한다.
- 반응 판정은 입력 지연을 고려해 **0.1초 단위**로 정확하게 체크해야 한다.

---

## 5. 예외 처리

- 플레이어가 이미 고개를 돌린 상태에서 이벤트가 즉시 귀신이 등장하며 게임 오버 처리가 되어야 한다.
- 귀신 추격 이벤트 중에도 어깨 두드림 이벤트는 발생한다.
- 시스템 오류로 사운드가 출력되지 않더라도 이벤트 로직은 정상적으로 실행된다.