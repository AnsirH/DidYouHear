# 요구사항 명세서: 귀신 시스템

## 1. 개요

귀신은 플레이어의 잘못된 행동이나 반응 실패 시 등장하며, **게임 오버 또는 추격 이벤트**를 유발하는 핵심 공포 요소이다. 평상시에는 나타나지 않으며, 플레이어의 긴장감을 극대화하기 위해 적절한 시점에만 출현한다.

---

## 2. 목적

- 플레이어에게 **즉각적 공포**를 제공하고, 행동의 실수에 대한 **명확한 페널티**를 준다.
- 귀신 등장과 추격 이벤트를 통해 **게임의 긴장감과 몰입도**를 유지한다.
- 플레이어의 이동, 공깃돌, 어깨 두드림, 환경 이벤트 등 다양한 시스템과 연동되어 **리액션 기반 공포 경험**을 제공한다.

---

## 3. 기능 요구사항 상세

### [REQ-GHOST-01] 정상 상태에서 비가시

- **설명**: 플레이어가 정상적으로 이동하거나 이벤트에 올바르게 대응하는 동안 귀신은 나타나지 않는다.
- **세부 조건**:
    - 걷기/달리기/숙이기/멈추기 중 귀신은 비가시 상태.
    - 공포 연출은 최소한의 배경 사운드로만 제공.

---

### [REQ-GHOST-02] 잘못된 반응 시 등장

- **설명**: 공깃돌 미사용, 어깨 두드림 반응 실패, 어깨 두드림 발생 타이밍에 뒤돌기, 환경 이벤트 무시 등 **잘못된 반응**이 발생하면 귀신이 강제로 등장한다.
- **세부 조건**:
    - 즉시 카메라 강제 뒤돌림 연출 발생.
    - 화면에 귀신이 등장하며 공포 사운드와 점멸 효과 동반.
    - 등장 시점에서 플레이어 이동은 제한되지 않으나, 추격 이벤트 전환이 가능.

---

### [REQ-GHOST-03] 추격 및 게임 오버

- **설명**: 귀신 등장 시, 상황에 따라 **즉시 게임 오버** 또는 **추격 이벤트**로 전환된다.
- **세부 조건**:
    - 잘못된 반응 직후 즉시 게임 오버 처리 가능.
    - 환경 이벤트 무시 시 추격 이벤트 발생.
    - 추격 이벤트에서는 달리기 상태가 강요되며, 플레이어는 일정 거리 이상 벗어나야 추격 종료.
    - 추격 이벤트 중에 플레이어가 달리기를 멈추면 즉시 게임 오버 처리.
    - 추격 구간 종료 시 귀신은 사라지고 정상 이동 상태로 전환.

---

### [REQ-GHOST-04] 시각 및 청각 연출

- **설명**: 귀신 등장 시 시각적·청각적 공포 요소를 동시에 제공한다.
- **세부 조건**:
    - 3D 방향 오디오 적용, 플레이어 위치에 따라 소리 방향 다름.
    - 화면 점멸, 왜곡, 캐릭터 그림자 변화 등 시각적 효과 포함.
    - 등장 애니메이션은 0.3초 이내 시작되고, 1~2초 내 최고 공포 연출 제공.

---

## 4. 비기능 요구사항

- 귀신 등장/추격 로직은 **0.1초 단위**로 입력과 반응을 정확히 판정.
- 반복 플레이 시에도 귀신 등장 연출과 위치가 충분히 다양해야 함.
- 귀신 관련 연출은 FPS(60) 유지에 영향을 최소화하도록 최적화.
- 게임 오버 또는 추격 이벤트 전환 시 프레임 드랍 없이 즉시 전환 가능.

---

## 5. 예외 처리

- 귀신 등장 시 카메라나 시점 전환 오류 발생 시, 강제로 플레이어 시점 고정 후 연출 재시작.