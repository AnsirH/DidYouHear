# 요구사항 명세서: 플레이어 이동

## 1. 개요

플레이어는 복도를 진행하기 위해 **걷기, 달리기, 숙이기, 멈추기**와 같은 이동 동작을 수행할 수 있으며, 고개를 돌려 뒤를 돌아보는 행위가 가능하다. 각 이동 상태는 게임의 핵심 메커니즘(공깃돌, 이벤트 반응, 귀신 등장 조건 등)과 밀접하게 연계된다.

---

## 2. 목적

- 플레이어의 입력에 따라 즉각적이고 직관적인 이동 동작을 제공한다.
- 이동 방식에 따라 **위험도와 이벤트 빈도**가 달라지도록 하여 긴장감을 유지한다.
- 뒤돌아보기와 같은 특별한 이동 동작을 통해 공포 연출을 강화한다.

---

## 3. 기능 요구사항 상세

### [REQ-PLAYER-01] 걷기(Walk)

- **설명**: 기본 이동 상태. 속도는 중간이며, 일정 간격으로 공깃돌을 던진다.
- **세부 조건**:
    - 이동 키( W )를 눌러 이동
    - 기본 이동 속도는 **1.5m/s**로 설정한다.
    - 일정 간격(3~5초, 랜덤)으로 자동으로 공깃돌을 던진다.
    - 공깃돌 충돌음을 통해 안전 여부를 확인할 수 있다.
    - 이벤트 발생 시 대부분의 상황에서 안전하게 대응 가능하다.

---

### [REQ-PLAYER-02] 달리기(Run)

- **설명**: 빠른 속도로 복도를 이동하지만, 그만큼 위험도가 상승한다.
- **세부 조건**:
    - 달리기 키( Left Shift )를 눌러 이동
    - 이동 속도는 **3.0m/s**로 걷기의 2배.
    - 공깃돌 던지는 주기가 **걷기의 절반(1.5~2.5초)**로 짧아진다.
    - 어깨 두드림 이벤트와 환경 이벤트 발생 빈도가 1.5배 증가한다.
    - 귀신 추격이 발생했을 때 반드시 필요한 동작이다.

---

### [REQ-PLAYER-03] 숙이기(Crouch)

- **설명**: 몸을 숙여 조용히 이동하는 상태. 특정 이벤트 회피에 필수적이다.
- **세부 조건**:
    - 숙이기 키( Ctrl )를 눌러 숙이기.
    - 이동 속도는 **0.8m/s**로 걷기의 절반.
    - 숙이기 상태에서는 **귀신 추격 시 생존 불가** (즉시 잡힘 처리).
    - 환경 이벤트(불 켜짐, 물소리 등) 발생 시 반드시 숙여야 통과 가능하다.
    - 숙이는 동안에도 공깃돌을 던진다.

---

### [REQ-PLAYER-04] 멈춤춤(Stop)

- **설명**: 제자리에서 멈춰 주변 상황을 확인하는 상태.
- **세부 조건**:
    - 이동 키( W )를 입력하지 않는 것으로 정지.
    - 공깃돌 소리가 나지 않았을 때 반드시 선택해야 하는 동작.
    - 멈춘 상태에서는 플레이어가 스스로 공깃돌을 뒤로 던질 수 있다.( 이동 시에는 일정 주기마다 한 번씩 던져짐 )
    - 공깃돌 소리가 나면 이동할 수 있다.
    - 만약 소리가 나지 않았는데 이동하면 즉시 잡힘 처리.

---

### [REQ-PLAYER-05] 뒤돌아보기(Look Back)

- **설명**: 플레이어는 고개를 좌우로 돌려 뒤를 볼 수 있다.
- **세부 조건**:
    - 마우스/키 입력으로 좌측 또는 우측 방향으로 고개 회전 가능.
    - 어깨 두드림 이벤트 시 반대 방향으로만 뒤돌아야 안전하다.
    - 잘못된 방향으로 뒤돌거나 무시하면 강제 뒤돌림 연출과 함께 귀신이 등장한다.
    - 뒤돌아보는 동안에도 걷기/달리기/숙이기 상태를 유지할 수 있다.

---

## 4. 비기능 요구사항

- 이동 조작은 **키보드 및 마우스(또는 컨트롤러)**로 직관적으로 설계한다.
- 모든 이동 전환은 **0.3초 이내**의 반응성을 가져야 한다.
- 애니메이션은 각 이동 상태마다 자연스럽게 연결되어야 하며, 부자연스러운 끊김이 없어야 한다.

---

## 5. 애니메이션 시스템

### [REQ-PLAYER-06] 애니메이션 파라미터

- **설명**: 플레이어의 이동 상태에 따라 애니메이션 파라미터를 제어한다.
- **세부 조건**:
    - **isMoving**: 플레이어가 이동 중일 때 true (걷기, 달리기, 숙이기 포함)
    - **isRunning**: 플레이어가 달리기 상태일 때 true
    - **isCrouching**: 플레이어가 숙이기 상태일 때 true
    - 애니메이션 파라미터는 PlayerController에서 자동으로 관리됨
    - 이동 상태 변경 시 즉시 애니메이션 파라미터 업데이트
    - Animator 컴포넌트가 없어도 게임 진행에 문제없음 (경고 로그만 출력)

---

## 6. 예외 처리

- 귀신 연출이 시작되면 모든 이동 입력은 무시되고 게임 오버 연출만 재생된다.