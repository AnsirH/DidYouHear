# 요구사항 명세서: 엔딩 시스템

## 1. 개요

플레이어가 복도의 끝에 도달하거나 귀신과 마주치는 상황에 따라 **탈출 엔딩** 또는 **게임 오버 엔딩**이 발생한다. 엔딩 시스템은 플레이어의 행동 결과를 명확하게 보여주어 게임 경험의 **완결감**을 제공한다.

---

## 2. 목적

- 플레이어 행동에 따른 **결과 반영**으로 성취감 또는 공포감 제공.
- 짧은 플레이 타임 내에도 **분명한 종료점**을 제시.
- 게임 반복 플레이 시 **다양한 엔딩 연출**로 리플레이성을 강화.

---

## 3. 기능 요구사항 상세

### [REQ-END-01] 탈출 엔딩

- **설명**: 플레이어가 복도의 끝까지 안전하게 도달했을 때 발생.
- **세부 조건**:
    - 최종 복도 조각 도달 시 자동으로 엔딩 연출 시작.
    - 연출 요소:
        - 밝아지는 조명과 탈출구 시각화.
        - 짧은 안도감 사운드 및 배경 음악 재생.
        - 플레이어 시점 카메라 이동 및 복도 밖 전환 애니메이션.
    - 엔딩 후 결과 화면에서 **플레이 시간**, **반응 성공률** 등 간단한 통계 표시.

---

### [REQ-END-02] 게임 오버 엔딩

- **설명**: 귀신과 마주치거나 반응 실패 시 발생.
- **세부 조건**:
    - 플레이어 이동 정지 후 카메라 강제 뒤돌림 및 플레이어 시점 고정.
    - 귀신 등장 후 화면 점멸, 공포 사운드 재생.
    - 2~3초 후 화면 암전 처리 후 게임 오버 연출 시작.
    - 연출 후 결과 화면에서 **실패 지점**, **발생 이벤트** 등 통계 표시.

---

### [REQ-END-03] 엔딩 연출 전환

- **설명**: 엔딩 전환 시 게임 상태를 안전하게 정지하고 연출 모드로 전환.
- **세부 조건**:
    - 플레이어 이동 입력 제한.
    - 이벤트, 귀신, 공깃돌 시스템 등 모든 게임 로직 일시 정지.
    - 사운드 및 조명은 엔딩 연출용으로 전환 가능.
    - 연출 종료 후 메뉴 또는 재시작 선택 가능.

---

## 4. 비기능 요구사항

- 엔딩 연출은 **30FPS 이하로 프레임 드랍 없이** 실행되어야 함.
- 반복 플레이 시에도 탈출/게임 오버 엔딩 모두 **일관된 연출 품질** 유지.
- 엔딩 연출 시 **UI·카메라·사운드 동기화**가 정확해야 함.
- 결과 통계 화면은 빠르게 로드되어 플레이어가 즉시 확인 가능.

---

## 5. 예외 처리

- 엔딩 도중 이벤트가 겹치거나 귀신이 등장할 경우, 엔딩 연출 우선 적용.
- 연출 도중 사운드 또는 조명 오류 발생 시, 기본값으로 대체하여 게임 진행 보장.
- 플레이어 위치 오류나 충돌 발생 시, 엔딩 카메라 시점으로 강제 이동 후 연출 유지.